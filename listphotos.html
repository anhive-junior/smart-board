<!--
/**
 * AnHive Co., Ltd.
 * LICENSE: This source file is subject to version 0.1 of the AnHive license. 
 * If you did not receive a copy of the AnHive License and are unable to obtain it
 * please send a note to anhive@gmail.com so we can mail you a copy immediately.
 *
 * @author     AnHive Co., Ltd <anhive@gmail.com>
 * @copyright  2013-2015 AnHive Co., Ltd
 * @license    http://www.anhive.com/license/1_01.txt  AnHive License 1.01
 */
-->

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />   
    <script type="text/javascript" src="signage.base.js"></script>
	<link rel="stylesheet" type="text/css" href="signage.base.css">
    <title>AnHive, List Media Files</title>
</head>
<body >
    <div class="container">
        <div class="contents">
		
			<!-- head note -->
			<div class='headnote' onclick="javascript:document.location.href='home.html'">
				<img id="headnote_img"  style="height:15px;" alt="profile">
				<span class="input_title" id='subject'></span> 
				<span class="input_title" id='owner'></span>
			</div>
			<div id = "file_head" style="margin-top:10px;"><!-- upper line feed --> 
			    <div id='dir'style = "margin-left:5px"></div><br>
				<img id="file_img" alt = "profile" style="height:80px; display:none; margin-left:5px;" >
			</div>
    
		
    
</div>
	<div class='footer'id="foot_note" ><br></div>
</body>
</html>

<script>
var file_head = document.getElementById("file_head");
var headnote = function(){ // headnote에 대한 데이터를 가지고 옵니다.
    var data = new FormData(); 
    data.append("func", "headnote");
    POST("listphotos.php", data, function(resp){
        document.getElementById("headnote_img").setAttribute("src", resp.data.photo);
        document.getElementById("subject").innerHTML = resp.data.subject;
        document.getElementById("owner").innerHTML = resp.data.owner;
        document.getElementById("foot_note").innerHTML = resp.data.footer;
    });
}

var dircontent = function(){ // headnote에 대한 데이터를 가지고 옵니다.
    var data = new FormData(); 
	data.append("func", "dircontent"); 
    POST("listphotos.php", data, function(resp){
       document.getElementById("dir").innerHTML = "현재 directory"+resp.data;
    });
}

var filecontent = function(){ // headnote에 대한 데이터를 가지고 옵니다.
    var data = new FormData(); 
	data.append("func", "filecontent"); 
    POST("listphotos.php", data, function(resp){
	    for(let i=0;i<resp.data.count;i++){
		    cont = resp.data.contents[i];
			let clone = document.getElementById("file_img").cloneNode(true);
			clone.style.display="inline-block";
            clone.setAttribute("id", "file_img" + (i+1));
			clone.setAttribute("src",cont['dfile']);
			clone.setAttribute("onclick", "window.open('"+cont['link']+"', '_self');");
			file_head.appendChild(clone);
		}
    });
}


headnote();
dircontent();
filecontent();


	
</script>
