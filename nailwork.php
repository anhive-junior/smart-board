<?php 
/**
 * AnHive Co., Ltd.
 * LICENSE: This source file is subject to version 0.1 of the AnHive license. 
 * If you did not receive a copy of the AnHive License and are unable to obtain it
 * please send a note to anhive@gmail.com so we can mail you a copy immediately.
 *
 * @author     AnHive Co., Ltd <anhive@gmail.com>
 * @copyright  2013-2015 AnHive Co., Ltd
 * @license    http://www.anhive.com/license/1_01.txt  AnHive License 1.01
 */
session_start(); 
if (!isset($_SESSION["ip"])) header("location:.");
include_once("lib/get_config.php");
include_once("lib/get_access.php");
include_once("lib/lib_common.php"); // outputJSON();

$services['headnote'] = '_headnote';
function _headnote(){
	$contents=isset($_GET['v'])?"video":"slide";
	$data=array(
		"photo" => $_SESSION['photo'],
		"subject" => $_SESSION['subject'],
		"owner" => $_SESSION['owner'],
		"footer" => $_SESSION['footnote'],
		"content_name" => $contents
	);
	outputJSON($data, "success");
};

$func= isset($_POST['func'])?$_POST["func"]:"test";


if (!isset($services[$func])) 
        outputJSON("Undefined service[$func].");
try {
    call_user_func( $services[$func]);
    //s00_log2(4, print_r($services,true));
} catch (Exception $e) {
    outputJSON($e->getLine().'@'.__FILE__."\n".$e->getMessage());
    s00_log(print_r($e->getTrace(),true));
}
?>