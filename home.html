<!DOCTYPE html >
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />   
    <link rel="stylesheet" type="text/css" href="signage.base.css">
    <script src="signage.base.js"></script>
    <title>SweetHome</title>
<style>
html, body {
    padding : 0;
    margin : 0;
    height : 100%;
    overflow: hidden;
    background-color: #f5f6fa;
}

#photo {
    background-size: cover;
    background-position: center;
    height : 40%;
    width : 100%;
    z-index: -1;
}

#contents {
    height : 100%;
}

.container {
    height : 60%;
    width : 100%;
}


.tile {
    height : 19.5%;
    cursor : pointer;
    color:#fff;
    background: #efefef;
    line-height: 11vh; /*********/
}

.tiletitle{
    /*border-bottom: dotted 1px #e4e4e4;*/
    font-size:1.7em;
    font-weight:bold; 
    color:#fff;
}

.config {
    position: absolute;
    top : 0;
    height : 100%;
    width : 0;
    z-index: 1;
    padding-top : 80px;
    transition: 0.6s;
    overflow : hidden;
    background-color : #f5f6fa;
}

.config .closebtn {
    top : 15px;
    position: absolute;
    right: 25px;
    font-size: 36px;
    margin-left: 50px;
    cursor : pointer;
}

header {
    position: absolute;
    top : 0%;
    color : rgba(44, 62, 80,1.0);
    text-align : center;
    font-weight: bold; 
    font-size : 24px;
    background-color : rgba(236, 240, 241, 0.5);
    border-bottom: 5px solid rgba(241, 144, 102, 0.5);
    padding: 13px 0;
    width : 100%;
    left : 50%;
    transform : translate(-50%, 0);
    -webkit-transform: translate(-50%, 0);
 }

 footer {
    position: absolute;
    bottom : 0;
    color : black; 
    text-align : center;
    font-weight: bold; 
    background-color : white;
    width : 100%;
 }

@media screen and (min-width: 800px){
    #photo {
        margin :0 auto;
        width : 65%;
    }
    .container {
        margin : 0 auto;
        width : 65%;
    }
    .button_span {
        padding : 10% 0;
    }
    header {
        margin : 0 auto;
        width : 65%;    
    }
    footer {
        margin : 0 auto;
        width : 65%; 
    }
}

</style>
</head>
<body>
<div id="photo">
    <header>
        <span id="subject"></span>
        <span id="owner"></span>
    </header>
</div>
<div class="container">
    <!--configuration-->
    <div><i style="margin-top : -75px; margin-left : 30px; cursor: pointer; max-width : 45px;" onclick="config_button();">
        <img src="./images/cog-solid.svg" title="설정" alt="설정">
    </i></div>
    <!-- contents -->
    <div id="contents" style="text-align:center;">
        <div id='content_none' class="tile" style="display:none;background-color:#f86924">
            <div class="tiletitle"></div>
        </div>
        <!-- button -->
        <div class="config" id="buttons" style="text-align:center">
            <div style="border-bottom: 5px solid #7f8fa6; width : 80%; margin:0 auto; margin-bottom : 15px; font-weight: bold; padding-bottom: 10px;">
                Configuration
            </div>
            <i class="closebtn" onclick="config_button()">
                <img src="./images/close_btn.svg" title="닫기" alt="닫기">
            </i>
            <span id='button_none' class="button_span" style="display:none"></span>
        </div>
    </div>
    <footer id="foot_note"></footer>
</div>
<script>
var content_none = document.getElementById("content_none");
var buttons = document.getElementById("buttons");
var config_status = false;
function config_button(){
    if(config_status == false){
        document.getElementsByClassName("config")[0].style.width="250px";
        config_status = true;
    } else {
        document.getElementsByClassName("config")[0].style.width="0";
        config_status = false;
    }
}

var headnote = function(){ // headnote에 대한 데이터를 가지고 옵니다.
    var data = new FormData(); 
    data.append("func", "headnote");
    POST("s00_signage.php", data, function(resp){
        document.getElementById("photo").style.backgroundImage = "url(" + resp.data.photo + ")";
        document.getElementById("subject").innerHTML = resp.data.subject;
        document.getElementById("owner").innerHTML = resp.data.owner;
        document.getElementById("foot_note").innerHTML = resp.data.footer;
    });
}

var home_level_contents = function(){ // level에 따른 contents를 가지고 옴
    var request = new XMLHttpRequest();
    var data = new FormData();
    data.append("func", "home_level_contents");
    POST("s00_signage.php", data, function(resp){
        for(i=0; i<resp.data.count; i++){
            cont = resp.data.contents[i];
            var clone = document.getElementById("content_none").cloneNode(true);
            
            clone.setAttribute("id","norm" + (i+1));
            clone.style.display="block";
            clone.setAttribute("onclick", "window.open('"+cont['link']+"', '_self');");
            clone.style.backgroundColor = cont['color'];
            ch = clone.childNodes;
            for (var k = 0;k<ch.length; k++ ){
                if (ch[k].className == 'tiletitle')
                     ch[k].innerHTML = cont['tiletitle']
            }
            contents.appendChild(clone);
        }
    });
}

var home_bottom_button = function(){
    var data = new FormData();
    data.append("func", "home_bottom_button");
    POST("s00_signage.php", data, function(resp){
        for(i=0; i<resp.data.count; i++){
            cont = resp.data.contents[i];
            var clone = document.getElementById("button_none").cloneNode(true);
            clone.style.display="inline-block";
            clone.setAttribute("id", "b" + (i+1));
            ch = clone.childNodes;
            clone.setAttribute("onclick", "window.open('"+cont['link']+"', '_self');");
            clone.innerHTML = cont['spanInner'];
            buttons.appendChild(clone);
            
        }
    });
}

headnote();
home_level_contents();
home_bottom_button();
    
</script>    
</body>
</html>
