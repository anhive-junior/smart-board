<!DOCTYPE html >
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />   
    <link rel="stylesheet" type="text/css" href="signage.base.css">
    <script src="signage.base.js"></script>
    <title>SweetHome</title>
<style>
html, body {
    padding : 0;
    margin : 0;
    height : 100%;
}
#photo {
    position: absolute;
    background-size: cover;
    background-position: center;
    height : 100%;
    width : 100%;
    z-index: -1;
    opacity: 0.8;
}

table {
    text-align : center;
}

.tile {
    margin: 3px;
    padding-top: 17px;
    padding-bottom: 17px;
    cursor : pointer;
    border: solid 1px #e4e4e4;
            color:#fff;
    background: #efefef; 
    border-radius: 2px;
}
.tile:active { background:green; }

.tiletitle{
    /*border-bottom: dotted 1px #e4e4e4;*/
    font-size:1.7em;
    font-weight:bold; 
            color:#fff;
}
.tiletitle:active { background:green; }

.instruction {
    color:#555555;
    font-size:1.2em;
    font-weight:bold; 
    padding-top:0.6em;
}

header {
    position: absolute;
    color : white;
    text-align : center;
    font-weight: bold; 
    font-size : 24px;
    background-color : #636e72;
    padding: 10px 10px;
    border: 5px solid #2d3436;
    padding: 13px 0;
    width : 20%;
    min-width : 320px;
    margin-left : 2%;
    margin-top : 2%;
 }
</style>
</head>
<body >
<div id="photo"></div>
<div class="container">
    <div class="contents">
        <header>
            <span id="subject"></span>
            <span id="owner"></span>
        </header>
        
        
        <div style="margin-top:5px;"><!-- upper line feed --></div>
        
        <div id="contents" style="text-align:center; margin: 0 auto;">
        
            <div id='content_none' class="tile" style="display:none;background-color:#f86924">
                <div class="tiletitle"></div>
                <div class="instruction"></div>
            </div>
            
        </div>

        <div style="margin-top:5px;"><!-- upper line feed --></div>
        
        <div class="button_base" id="buttons" style="text-align:center">
            <span id='button_none' class="button_span" style="display:none"></span>
        </div>
        
        <div style="margin-top:10px;"><!-- upper line feed --></div>
    </div>
</div>
    <div class='footer' id="foot_note"></div>
<script>
var content_none = document.getElementById("content_none");
var buttons = document.getElementById("buttons");

var headnote = function(){ // headnote에 대한 데이터를 가지고 옵니다.
    var data = new FormData(); 
    data.append("func", "headnote");
    POST("s00_signage.php", data, function(resp){
        document.getElementById("photo").style.backgroundImage = "url(" + resp.data.photo + ")";
        document.getElementById("subject").innerHTML = resp.data.subject;
        document.getElementById("owner").innerHTML = resp.data.owner;
        document.getElementById("foot_note").innerHTML = resp.data.footer;
    });
}

var home_level_contents = function(){ // level에 따른 contents를 가지고 옴
    var request = new XMLHttpRequest();
    var data = new FormData();
    data.append("func", "home_level_contents");
    POST("s00_signage.php", data, function(resp){
        for(i=0; i<resp.data.count; i++){
            cont = resp.data.contents[i];
            var clone = document.getElementById("content_none").cloneNode(true);
            
            clone.setAttribute("id","norm" + (i+1));
            clone.style.display="block";
            clone.setAttribute("onclick", "window.open('"+cont['link']+"', '_self');");
            clone.style.backgroundColor = cont['color'];
            ch = clone.childNodes;
            for (var k = 0;k<ch.length; k++ ){
                if (ch[k].className == 'tiletitle')
                     ch[k].innerHTML = cont['tiletitle']
                else if (ch[k].className == 'instruction')
                      ch[k].innerHTML = cont['ins']
            }
            contents.appendChild(clone);
        }
    });
}

var home_bottom_button = function(){
    var data = new FormData();
    data.append("func", "home_bottom_button");
    POST("s00_signage.php", data, function(resp){
        for(i=0; i<resp.data.count; i++){
            cont = resp.data.contents[i];
            var clone = document.getElementById("button_none").cloneNode(true);
            clone.style.display="inline-block";
            clone.setAttribute("id", "b" + (i+1));
            ch = clone.childNodes;
            clone.setAttribute("onclick", "window.open('"+cont['link']+"', '_self');");
            clone.innerHTML = cont['spanInner'];
            buttons.appendChild(clone);
            
        }
    });
}

headnote();
home_level_contents();
home_bottom_button();
    
</script>    
</body>
</html>
